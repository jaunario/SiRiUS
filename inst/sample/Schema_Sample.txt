# TODO: Organize sequence in terms of what parameters are location specific and which parameters apply to the whole AOI

# Start of SCHEMA TEMPLATE
SCHEMA_NAME = "auto"

# Parametes to directly use prepared oryza files.
# auto setting means files are generated using what's available or generated by the system. 
# If actual files are specified, everything will be used for all pixels of the AOI

SCHEMA_CONTROLDAT    = "auto"
SCHEMA_EXPFILE       = "auto"  # Experiment file will be based on the experiment_template; and weather will be extracted from CDS AgERA5 (for now manually using Colab tool)
SCHEMA_VARIETYFILE   = "auto"     # Variety file will be MVshort
SCHEMA_SOILFILE      = "auto"  # For soil, it will be generated from soilgrids.org
SCHEMA_RERUNFILE     = "auto"  # Simulation period will automatically translate to rerun plus explicitly specified rerun parameters

## Area of Interest ----
SCHEMA_AOIFILE       = "gadm.1"
SCHEMA_COUNTRY_ISO   = "VNM"       # If AOIFILE is a shapefile, this variable serves as part of labeling 
SCHEMA_AOIFILTER   = "Can Tho"


## Simulation Period ----
# Set these parameters to NA if reruns are not needed, i.e. IYEAR, EMYEAR, STTIME and EMD from experiment file will be used
SCHEMA_STARTYEAR = 2017
SCHEMA_ENDYEAR   = 2022
SCHEMA_PLANTDOY  = c(91, 322) # PLANTDOY = EMD. if CONTSIM = FALSE STTIME = EMD


### Sirius Parameters ----
SCHEMA_BUILTINS_SUBSET = "Can Tho" # Check data subdirectories soil and weather

## Weather Source ----
# Will directly supply CNTR, ISTN to experiment/rerun file
SCHEMA_WTHSRC  = "agera5"

## Soil Options ----

## ORYZA Options
SCHEMA_CONTSIM = TRUE 
# parameter for continuous simulation.
# Implications of Parameter
#                    |  TRUE         |  FALSE      |
# CONTROL _________________________________________
#   SOILKILL         | 'NO'          | 'YES'       |
# RERUN ___________________________________________
#   FILEI2 (Soil)    | One (CONTROL) | All         |
#   ISTN (Wth Pixel) | One (EXP)     | All         |
#   IYEAR            | One (EXP)     | All (Rerun) |
#   EMYEAR           | All (Rerun)   | All (Rerun) |
#   STTIME           | One (EXP)     | All (Rerun) |
#   EMD              | All (Rerun)   | All (Rerun) |
#
# When Soilfile is in the rerun file, SOILKILL = YES
# When 'One' is indicated, Parameter is placed in Exp/Control file
# If SCHEMA_CONTSIM = TRUE, EMYEAR is declared in the rerun file but no IYEAR
#   and IYEAR = SCHEMA_STARTYEAR in experiment file
# If SCHEMA_CONTSIM = FALSE, IYEAR = EMD in rerun fule

## Other ORYZA Parameters ----
SCHEMA_EXPPARAMS = list(RUNMODE = "EXPERIMENT",
                        PRODENV = "WATER BALANCE",
                        WATBAL = "PADDY",
                        NITROENV = "NITROGEN BALANCE",
                        IRMTAB = matrix(c(0,2,366,2), ncol=2, byrow=TRUE))

SCHEMA_RERUNPARAMS = list(STTIME = c(85, 315))


# OUTPUT PARAMETERS
SCHEMA_OUTFORMAT   = "raster"  # or "vector"
SCHEMA_BASERASTER  = "soilgrids.org"

SCHEMA_VARS_OPDAT  = c("WRR14", "S_CO2C", "S_CH4C", "S_N2ON")
SCHEMA_VARS_RESDAT = c("WAGT", "CO2C", "CH4C", "N2ON")

# OPTIONAL PARAMETERS
# Use of Land Use Map for masking non-croplands
SCHEMA_MASKFILE = "./data/lulc/esri/48P_20170101-20180101.tif"
SCHEMA_MASKVAL  = 5
SCHEMA_AGGTHRES = 0.6 # When the processing resolution is coarser than the mask file
                      # AGGTHRES is the limit to retain the pixel


# TODO: Advanced Options
# 1) If SCHEMA_SOILFILE is "auto", run SoilBuilder to generate soil files
# 2) SCHEMA_SENSITIVITYSOIL = TRUE; A preset schema where only soil file changes
# 3) SCHEMA_ENSEMBLE        = FALSE; Summarize output of reruns in same pixel 

# End of SCHEMA Template
